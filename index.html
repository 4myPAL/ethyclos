<html lang="en">
<head>
<title>Home Credit Commons</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
	href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"
	type="text/javascript"></script>
<script
	src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
	type="text/javascript"></script>
<script type="text/javascript" src="web3.js"></script>
<script type="text/javascript" src="bignumber.js"></script>
<script type="text/javascript" src="creditCommons.js"></script>
<script type="text/javascript">
	window.onload = function() {
		document.getElementById('me').innerHTML = "ETH Account: <b>"
				+ myCoinbase + "<br></b> Credit Commons Member: <b>"
				+ myIsMember + "</b> Alias: <b>" + myAlias
				+ "<br></b> Whisper Account: <b>" + myWhisper
				+ "<br></b>Group ID: <b>" + myGroupNr + "</b> Group Name: <b>"
				+ myGroupName + "<br></b> Is Intertrade: <b>" + isIntertrade
				+ "</b> Is Commune: <b>" + isCommune + "</b>";
				
			
		document.getElementById('alias').innerHTML = "<b>" + myAlias + "</b>";
		document.getElementById('description').innerHTML = "<i>"
				+ myDescription + "</i>";
		document.getElementById('balance').innerHTML = "<h2>" + myBalance + " <span class=\"badge\">"
				+ myCurrencyName + "</span></h2>";
		document.getElementById('debitLimit').innerHTML = myDebitLimit + " <span class=\"badge\">"
				+ myCurrencyName + "</span>";
		document.getElementById('creditLimit').innerHTML = myCreditLimit + " <span class=\"badge\">"
        + myCurrencyName + "</span>";
		document.getElementById('isIntertrade').innerHTML = isIntertrade;
		document.getElementById('isCommune').innerHTML = isCommune;
		document.getElementById('myGroupName').innerHTML = "<b>" + myGroupName
				+ "</b>";
		document.getElementById('myGroupDescription').innerHTML = "<i>"
				+ myGroupDescription + "</i>";
		document.getElementById('myGroupNr').innerHTML= "<b>" + myGroupNr
				+ "</b>";
		document.getElementById('myGroupNrM').innerHTML= myGroupNrM;				
		document.getElementById('myCurrencyName').innerHTML= "<span class=\"badge\">"
	        + myCurrencyName + "</span>";
		document.getElementById('myRate').innerHTML= myRate;
		document.getElementById('myGroupDebitLimit').innerHTML= myGroupDebitLimit + " <span class=\"badge\">"
        + myCurrencyName + "</span>";
		document.getElementById('myGroupCreditLimit').innerHTML= myGroupCreditLimit + " <span class=\"badge\">"
        + myCurrencyName + "</span>";
        document.getElementById('myGroupOpen').innerHTML= myGroupOpen;
        document.getElementById('communeAccount').innerHTML= communeAccount;
        document.getElementById('intertradeAccount').innerHTML= intertradeAccount;
        document.getElementById('intertradeBalance').innerHTML= intertradeBalance + " <span class=\"badge\">"
        + myCurrencyName + "</span>";
        document.getElementById('intertradeDebitLimit').innerHTML= intertradeDebitLimit + " <span class=\"badge\">"
        + myCurrencyName + "</span>";
        document.getElementById('intertradeCreditLimit').innerHTML= intertradeCreditLimit + " <span class=\"badge\">"
        + myCurrencyName + "</span>";
	}

	function register() {
		if (isMember = false) {
			var alias = document.getElementById('alias').value;
			var whisperIdentity = web3.shh.newIdentity();
			creditCommons.registerSystem(newAlias, whisperIdentity);
			location.reload();
		}
	}

	function resign() {
		if (myGroupID > 0) {
			creditCommons.resignGroup();
			location.reload();
		}
	}

	function joinGroup() {
		if (myGroupID = 0) {
			var group = document.getElementById('group').value;
			creditCommons.joinGroup(group);
			location.reload();
		}
	}
</script>
<style type="text/css">
.navbar {
	margin-bottom: 0;
	border-radius: 0;
}
</style>
</head>
<body>

	<div class="container bg-3 text-center">
		<script type="text/javascript" src="navbar.js"></script>
		<small><p class="bg-info" id="me"></p></small>
		<div class="row">
			<h3>My account</h3>
			<div class="col-sm-6">
				<div class="well">
					<h4><span class="glyphicon glyphicon-user"></span> My Wallet</h4>
					<table class="table">
						<thead>
						</thead>
						<tbody>
							<tr>
								<td class="text-right col-sm-1">Alias:</td>
								<td class="text-left"><p id="alias"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-1">Description:</td>
								<td class="text-left col-sm-5"><p id="description"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-1">Balance:</td>
								<td class="text-right"><p id="balance"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-1">Debit Limit:</td>
								<td class="text-right"><p id="debitLimit"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-1">Credit Limit:</td>
								<td class="text-right"><p id="creditLimit"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-1">Intertrade:</td>
								<td class="text-center"><p id="isIntertrade"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-1">Commune:</td>
								<td class="text-center"><p id="isCommune"></p></td>
							</tr>
						</tbody>
					</table>
				</div>
				<hr />
				<h4>Register at Credit Commons system</h4>
				<form class="form-horizontal" role="form" action="">
					<div class="form-group">
						<label class="control-label" for="alias">Chose alias:</label>
						<div>
							<input type="text" class="form-control" id="alias"
								placeholder="Enter your alias">
						</div>
					</div>
					<div class="form-group">
						<label class="control-label" for="description">Description</label>
						<div>
							<textarea class="form-control" rows="5" id="description"
								placeholder="Introduce yourself. Geolocation. Country code. Phones, email, etc."
								cols=""></textarea>
						</div>
					</div>
				</form>
				<button type="submit" class="btn btn-default" onClick="register();">Register</button>
			</div>
			<div class="col-sm-6">
				<div class="well">
					<h4><img src="https://cdn1.iconfinder.com/data/icons/multimedia-marketing/512/50-512.png" class="img-circle" width="50" height="50"> My Group</h4>
					<table class="table small">
						<thead>
						</thead>
						<tbody>
							<tr>
								<td class="text-right col-sm-2">Name:</td>
								<td class="text-left"><p id="myGroupName"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-2">Description:</td>
								<td class="text-left col-sm-4"><p id="myGroupDescription"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-2">Group ID:</td>
								<td class="text-left"><p id="myGroupNr"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-2">Number of Members:</td>
								<td class="text-center"><p id="myGroupNrM"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-2">Currency:</td>
								<td class="text-center"><p id="myCurrencyName"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-2">Rate:</td>
								<td class="text-right"><p id="myRate"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-2">Default Debit:</td>
								<td class="text-right"><p id="myGroupDebitLimit"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-2">Default Credit:</td>
								<td class="text-right"><p id="myGroupCreditLimit"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-2">Open:</td>
								<td class="text-center"><p id="myGroupOpen"></p></td>
							</tr>

							<tr>
								<td class="text-right col-sm-2">Commune account:</td>
								<td class="text-left"><p id="communeAccount"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-2">Intertrade Account::</td>
								<td class="text-left"><p id="intertradeAccount"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-2">Intertrade Balance:</td>
								<td class="text-right" id="intertradeBalance"><p></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-2">Intertrade Debit:</td>
								<td class="text-right"><p id="intertradeDebitLimit"></p></td>
							</tr>
							<tr>
								<td class="text-right col-sm-2">Intertrade Credit:</td>
								<td class="text-right"><p id="intertradeCreditLimit"></p></td>
							</tr>
						</tbody>
					</table>
				</div>
				<hr />
				<h4>
					Resign
					<h4>
						<button type="submit" class="btn btn-default" onClick="resign();">Resign
							from your Group</button>
						<h4>
							Join Group
							<h4>
								<form class="form-horizontal" role="form" action="">
									<div class="form-group">
										<input type="text" class="form-control" id="groupToJoin"
											placeholder="Enter the group ID">
									</div>
								</form>
								<button type="submit" class="btn btn-default"
									onClick="joinGroup();">Join</button>
								<hr />
			</div>
		</div>
	</div>

	<div class="panel-footer">
		<p>
			<img
				src="https://trancsitu.files.wordpress.com/2014/05/ethereum-logo.png"
				width="20" align="top" alt="" /> <i>Powered by ethereum</i>
		</p>
		<a rel="license"
			href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img
			alt="Creative Commons License" style="border-width: 0"
			src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a><br />This
		work is licensed under a <a rel="license"
			href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative
			Commons Attribution-NonCommercial-ShareAlike 4.0 International
			License</a>.
	</div>
</body>
</html>
