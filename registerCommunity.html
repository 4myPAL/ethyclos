<html lang="en">
<head>
<title>eThyclos Home</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
	href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<link rel="stylesheet" href="ethyclos.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script
	src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script type="text/javascript" src="web3.js"></script>
<script type="text/javascript" src="bignumber.js"></script>
<script type="text/javascript" src="ethyclos.js"></script>
<script type="text/javascript">
	window.onload = function() {
		document.getElementById('me').innerHTML = "ETH Account: <b>"
				+ myCoinbase + "<br></b> eThyclos Member: <b>" + myIsMember
				+ "</b> Alias: <b>" + myAlias + "<br></b> Whisper Account: <b>"
				+ myWhisper + "<br></b>Community: <b>" + myCommunity
				+ "</b> Community Name: <b>" + myCommunityName
				+ "<br></b> Is Commune: <b>" + isCommune + "</b> Is Bank: <b>"
				+ isBank + "</b>";

		var community = "";
		community = "<div class=\"well text-left\">"
				+ "<div class=\"media\">"
				+ "<div class=\"media-left\">"
				+ "<img src=\"" + myCommunityImage
	                + "\" class=\"media-object img-circle\" style=\"width: 100px\">"
				+ "</div>"
				+ "<div class=\"media-body\">"
				+ "<p><span class=\"glyphicon glyphicon-flag\"></span>  <b>My Community</b></p>"
				+ "<p class=\"name\">"
				+ myCommunityName
				+ "</p>"
				+ "Community ID: <b>"
				+ myCommunity
				+ "</b>"
				+ "</div></div>"
				+ "<p><i>"
				+ myCommunityDescription
				+ " </i></p>"
				+ "<p>Currency name: <span class=\"badge\">"
				+ myCurrencyName
				+ " </span></p>"
				+ "<p>Open : <b>"
				+ myCommunityOpen
				+ "</b></p>"
				+ "<p>Number of Members: <b>"
				+ myCommunityNrM
				+ "</b></p>"
				+ "<p>Exchange Rate: <b>"
				+ myRate
				+ "%</b></p>"
				+ "<p>Transfer Tax: <b>"
				+ "%</b></p>"
				+ "<p>Accumulation Tax : <b>"
				+ "%</b> per year</p>"
				+ "<p>Credit Trust Reward : <b>"
				+ "%</b></p>"
				+ "<p>Default Member Credit Line : <b>"
				+ mydefaultMemberCreditLine
				+ "</b> <span class=\"badge\">"
				+ myCurrencyName
				+ " </span></p>"
				+ "<p>Default Member Trust : <b>"
				+ mydefaultMemberTrust
				+ "</b> <span class=\"badge\"><span class=\"glyphicon glyphicon-thumbs-up\"></span> trusts</span></p>"
				+ "<p>Commune Account: <b>"
				+ myCommunityCommuneAccount
				+ "</b></p>"
				+ "<p>Central Bank Account: <b>"
				+ myCommunityBankAccount + "</b></p>" + "</div>";

		document.getElementById('community').innerHTML = community;

		var communities = "<form>" + "<div class=\"form-group\">"
				+ "<label for=\"communityToJoin\">Chose Community</label>"
				+ "<select class=\"form-control\" id=\"communityToJoin\">";

		for (i = 0; i < nrCommunities; i++) {
			var communityID = ethyclos.getCommunitybyIndex(i);
			var communityName = ethyclos.getCommunityDescription(communityID)[0];
			var option = "<option value=\"" + communityID + "\">" + communityID
					+ " - " + communityName + "</option>";
			communities += option;
		}

		communities += "</select>" + "</div>" + "</form>";

		document.getElementById('communities').innerHTML = communities;

	}

	function resign() {
		if (myGroupID > 0) {
			ethyclos.resignGroup();
			location.reload();
		}
	}

	function viewCommunity() {
		var cTJ = document.getElementById("communityToJoin").value;
		var cTJDescription = ethyclos.getCommunityDescription(cTJ);
		var cTJName = ethyclos.getCommunityDescription(cTJ)[0];
		var cTJDescription = ethyclos.getCommunityDescription(cTJ)[1];
		var cTJCurrencyName = ethyclos.getCommunityDescription(cTJ)[2];
		var cTJImage = ethyclos.getCommunityDescription(cTJ)[3]
		var cTJOpen = ethyclos.getCommunityDescription(cTJ)[4];
		var cTJNrM = ethyclos.getCommunityDescription(cTJ)[5];
		var cTJRates = ethyclos.getCommunityRates(cTJ);
		var cTJRate = ethyclos.getCommunityRates(cTJ)[0];
		var cTJdefaultMemberCreditLine = ethyclos.getCommunityRates(cTJ)[1];
		var cTJdefaultMemberTrust = ethyclos.getCommunityRates[2];
		var cTJManagement = ethyclos.getCommunityManagement(cTJ);
		var cTJBankAccount = ethyclos.getCommunityManagement(cTJ)[0];
		var cTJCommuneAccount = ethyclos.getCommunityManagement(cTJ)[1];
		var communityTJ = "";
		communityTJ = "<div class=\"well text-left\">"
				+ "<div class=\"media\">"
				+ "<div class=\"media-left\">"
				+ "<img src=\"" + cTJImage
	                + "\" class=\"media-object img-circle\" style=\"width: 100px\">"
				+ "</div>"
				+ "<div class=\"media-body\">"
				+ "<p><span class=\"glyphicon glyphicon-flag\"></span>  <b>Community</b></p>"
				+ "<p class=\"name\">"
				+ cTJName
				+ "</p>"
				+ "Community ID: <b>"
				+ cTJ
				+ "</b>"
				+ "</div></div>"
				+ "<p><i>"
				+ cTJDescription
				+ " </i></p>"
				+ "<p>Currency name: <span class=\"badge\">"
				+ cTJCurrencyName
				+ " </span></p>"
				+ "<p>Open : <b>"
				+ cTJOpen
				+ "</b></p>"
				+ "<p>Number of Members: <b>"
				+ cTJNrM
				+ "</b></p>"
				+ "<p>Exchange Rate: <b>"
				+ cTJRate
				+ "%</b></p>"
				+ "<p>Transfer Tax: <b>"
				+ "%</b></p>"
				+ "<p>Accumulation Tax : <b>"
				+ "%</b> per year</p>"
				+ "<p>Credit Trust Reward : <b>"
				+ "%</b></p>"
				+ "<p>Default Member Credit Line : <b>"
				+ cTJdefaultMemberCreditLine
				+ "</b> <span class=\"badge\">"
				+ cTJCurrencyName
				+ " </span></p>"
				+ "<p>Default Member Trust : <b>"
				+ cTJdefaultMemberTrust
				+ "</b> <span class=\"badge\"><span class=\"glyphicon glyphicon-thumbs-up\"></span> trusts</span></p>"
				+ "<p>Commune Account: <b>"
				+ cTJCommuneAccount
				+ "</b></p>"
				+ "<p>Central Bank Account: <b>"
				+ cTJBankAccount
				+ "</b></p>"
				+ "</div>";

		document.getElementById('communityTJ').innerHTML = communityTJ;
	}

	function joinCommunity() {
		if (myGroupID = 0) {
			var group = document.getElementById('group').value;
			ethyclos.joinGroup(group);
			location.reload();
		}
	}
</script>
<style type="text/css">
</style>
</head>
<body>

	<div class="container bg-3 text-center">
		<script type="text/javascript" src="navbar.js"></script>
		<small><p class="bg-info" id="me"></p></small>
		<div class="row">
			<h3>My Community Membership</h3>
			<div class="col-sm-6">
				<p id="community"></p>
				<button type="submit" class="btn btn-danger" onClick="resign();">Resign
					from your Community</button>
			</div>
			<div class="col-sm-6">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4>
							Join Community
							<h4>
					</div>
					<div class="panel-body">
						<p id="communities"></p>
					</div>
					<div class="panel-footer">
						<div class="btn-group">
							<button type="submit" class="btn btn-warning"
								onClick="viewCommunity();">Review Community</button>
							<button type="submit" class="btn btn-success"
								onClick="joinCommunity();">Join Community</button>
						</div>
					</div>
				</div>
				<br />
				<p id="communityTJ"></p>
			</div>
		</div>
	</div>


	<div class="panel-footer">
		<p>
			<img
				src="https://trancsitu.files.wordpress.com/2014/05/ethereum-logo.png"
				width="20" align="top" alt="" /> <i>Powered by ethereum</i>
		</p>
		<a rel="license"
			href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img
			alt="Creative Commons License" style="border-width: 0"
			src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a><br />This
		work is licensed under a <a rel="license"
			href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative
			Commons Attribution-NonCommercial-ShareAlike 4.0 International
			License</a>.
	</div>
</body>
</html>
